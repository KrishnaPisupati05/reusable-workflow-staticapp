name: Deploy Static Web App

on:
  push:
    branches:
      - master
      - dev
      - devfeatures
      - development
  workflow_dispatch:
  
    inputs:
      deploy-prod:
        description: "Set to true to deploy to Production"
        required: false
        type: choice
        options: ["false","true"]
        default: "false"

permissions:
  contents: read

jobs:
  deploy-staticwebapp:
    uses: ./.github/workflows/Reusable-workflow.yml
    with:
      node-version: 20.x
      app-location: app1/frontend
      output-location: build
      deploy-prod: ${{ inputs.deploy-prod }}
    secrets:
      STATIC_WEB_APP_TOKEN_TEST: ${{ secrets.STATIC_WEB_APP_TOKEN_TEST }}
      STATIC_WEB_APP_TOKEN_PROD: ${{ secrets.STATIC_WEB_APP_TOKEN_PROD }}